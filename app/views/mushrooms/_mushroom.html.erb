<div id="<%= dom_id mushroom %>" class="w-full my-5">
  <div><p>app/views/mushrooms/_mushrooms.html.erb</p></div>

  <!-- Data + Actions in same vertical plane -->
  <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
    <!-- Left: data spans 4 columns on md+ -->
    <div class="md:col-span-4">
      <dl class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <!-- First row: 4 inline items -->
        <div class="border rounded-md p-3">
          <dt class="text-sm text-gray-500">Name</dt>
          <dd class="font-medium"><%= mushroom.name %></dd>
        </div>

        <div class="border rounded-md p-3">
          <dt class="text-sm text-gray-500">Country</dt>
          <dd class="font-medium"><%= mushroom.country&.name %></dd>
        </div>

        <div class="border rounded-md p-3">
          <dt class="text-sm text-gray-500">State</dt>
          <dd class="font-medium"><%= mushroom.state&.name %></dd>
        </div>

        <div class="border rounded-md p-3">
          <dt class="text-sm text-gray-500">Fungus Type</dt>
          <dd class="font-medium"><%= mushroom.fungus_type&.name %></dd>
        </div>

        <!-- Full-width rows -->
        <% if mushroom.description.present? %>
          <div class="md:col-span-4 border rounded-md p-3">
            <dt class="text-sm text-gray-500">Description</dt>
            <dd class="whitespace-pre-wrap"><%= mushroom.description %></dd>
          </div>
        <% end %>

        <% if mushroom.comments.present? %>
          <div class="md:col-span-4 border rounded-md p-3">
            <dt class="text-sm text-gray-500">Comments</dt>
            <dd class="whitespace-pre-wrap"><%= mushroom.comments %></dd>
          </div>
        <% end %>
      </dl>
    </div>

    <!-- Right: actions column. Inside, two side-by-side groups on md+ -->
    <div class="md:col-span-1">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
        <!-- Group A: Primary actions -->
        <div class="flex flex-col gap-2">
          <% if !defined?(policy) || policy(mushroom)&.mushroom_image_mushroom? %>
            <%= link_to "Upload Image", new_mushroom_image_mushroom_path(mushroom), class: "w-full text-center rounded-md px-3.5 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white font-medium" %>
          <% end %>

          <% if !defined?(policy) || policy(mushroom)&.all_group_mushroom? %>
            <%= link_to "Add to Group", new_all_group_mushroom_path(mushroom_id: mushroom.id), class: "w-full text-center rounded-md px-3.5 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white font-medium" %>
          <% end %>

          <% if !defined?(policy) || policy(mushroom)&.mushroom_cluster? %>
            <%= link_to "Add to Cluster", new_cluster_mushroom_path(mushroom_id: mushroom.id), class: "w-full text-center rounded-md px-3.5 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white font-medium" %>
          <% end %>

          <%# Mirror authorization style of groups/clusters for projects %>
          <% if !defined?(policy) || policy(mushroom)&.mushroom_project? %>
            <%= link_to "Add to Project", new_mushroom_project_path(mushroom_id: mushroom.id), class: "w-full text-center rounded-md px-3.5 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white font-medium" %>
          <% end %>
        </div>

        <!-- Group B: CRUD actions (standardized look) -->
        <div class="flex flex-col gap-2">
          <% if !defined?(policy) || policy(mushroom)&.show? %>
            <%= link_to "Show", mushroom, class: "w-full text-center rounded-md px-3.5 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium border border-gray-200" %>
          <% end %>

          <% if !defined?(policy) || policy(mushroom)&.edit? %>
            <%= link_to "Edit", edit_mushroom_path(mushroom), class: "w-full text-center rounded-md px-3.5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white font-medium" %>
          <% end %>

          <% if user_signed_in? && (defined?(policy) ? policy(mushroom)&.destroy? : (current_user && mushroom.user == current_user)) %>
            <%= button_to "Delete this mushroom", mushroom, method: :delete, class: "w-full rounded-md px-3.5 py-2.5 text-white bg-red-600 hover:bg-red-500 font-medium cursor-pointer", data: { turbo_confirm: "Are you sure?" } %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>