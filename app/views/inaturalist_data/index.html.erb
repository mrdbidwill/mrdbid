<div class="container mx-auto px-4 py-8">
  <div class="mb-8">
    <h1 class="text-4xl font-bold mb-4">iNaturalist Observation Fields</h1>

    <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
      <h2 class="text-xl font-semibold mb-2">About This Dataset</h2>
      <p class="mb-4">
        This is a complete list of all <%= number_with_delimiter(@total_count) %> observation fields available on iNaturalist.
        These fields are particularly useful for mushroom and fungi identification to maintain consistency and avoid duplication.
      </p>
      <p class="text-sm text-gray-600">
        Last updated: February 13, 2026 |
        Source: <a href="https://www.inaturalist.org/pages/api+reference#get-observation_fields" class="text-blue-600 hover:underline" target="_blank">iNaturalist API</a>
      </p>
    </div>

    <div class="flex gap-4 mb-6">
      <%= link_to "Download CSV", download_inaturalist_csv_path,
          class: "bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg transition" %>
      <%= link_to "Download JSON", download_inaturalist_json_path,
          class: "bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition" %>
      <a href="https://github.com/mrdbidwill/mrdbid/tree/main/data/inaturalist"
         class="bg-gray-700 hover:bg-gray-800 text-white font-semibold py-2 px-6 rounded-lg transition"
         target="_blank">View on GitHub</a>
    </div>
  </div>

  <div class="mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-6">
    <h3 class="text-lg font-semibold mb-2">How to Find Mushroom/Mycology Fields</h3>

    <p class="mb-3 text-sm text-gray-700">
      Download the CSV or JSON file above, then use these methods to filter for mushroom and fungi-related fields:
    </p>

    <div class="space-y-4">
      <div>
        <h4 class="font-semibold text-sm text-gray-800 mb-1">Excel / Google Sheets / LibreOffice:</h4>
        <ol class="list-decimal list-inside space-y-1 text-sm text-gray-700 ml-2">
          <li>Open the CSV file</li>
          <li>Select the "name" or "description" column</li>
          <li>Use Data â†’ Filter or AutoFilter</li>
          <li>Filter by text contains: "mushroom", "fungi", "fungus", "spore", "mycelium", "cap", "gill", "pileus", "stipe", etc.</li>
        </ol>
      </div>

      <div>
        <h4 class="font-semibold text-sm text-gray-800 mb-1">Command Line (grep):</h4>
        <pre class="bg-gray-800 text-green-400 p-2 rounded text-xs overflow-x-auto">grep -i "mushroom\|fungi\|fungus\|spore\|mycelium" observation_fields.csv</pre>
      </div>

      <div>
        <h4 class="font-semibold text-sm text-gray-800 mb-1">Python (pandas):</h4>
        <pre class="bg-gray-800 text-green-400 p-2 rounded text-xs overflow-x-auto">import pandas as pd
df = pd.read_csv('observation_fields.csv')
mushroom_fields = df[df['name'].str.contains('mushroom|fungi|spore', case=False, na=False) |
                     df['description'].str.contains('mushroom|fungi|spore', case=False, na=False)]</pre>
      </div>

      <div>
        <h4 class="font-semibold text-sm text-gray-800 mb-1">Suggested Keywords for Mushroom/Fungi:</h4>
        <p class="text-xs text-gray-600 italic">
          mushroom, fungi, fungus, fungal, mycology, spore, mycelium, hypha, basidiomycete, ascomycete,
          cap, pileus, gill, lamella, stipe, stem, volva, annulus, pore, tube, conk, bracket, polypore,
          bolete, chanterelle, morel, truffle, puffball
        </p>
      </div>
    </div>
  </div>
</div>

