<% content_for :title, "Articles" %>

<div class="w-full">
  <h1 class="font-bold text-2xl">Articles</h1>

  <div class="mt-3 flex items-center gap-2 text-sm">
    <span>Filter by subject:</span>
    <%= link_to "All", articles_path, class: "px-2 py-1 rounded border #{'bg-gray-100' unless @subject}" %>
    <% @subjects.each do |s| %>
      <%= link_to s, articles_path(subject: s), class: "px-2 py-1 rounded border #{'bg-blue-50' if s == @subject}" %>
    <% end %>
  </div>

  <div class="mt-6 space-y-2">
    <% @articles.each do |article| %>
      <div class="border rounded-md p-4 bg-white">
        <div class="flex flex-wrap items-center justify-between gap-2">
          <h2 class="text-xl font-semibold"><%= link_to article.title, article_path(article) %></h2>
          <div class="text-xs text-gray-500">
            <% if article.subject.present? %>
              <span class="mr-2">Subject: <%= article.subject %></span>
            <% end %>
            <% if article.published_at.present? %>
              <span><%= article.published_at.to_date.to_fs(:db) %></span>
            <% end %>
          </div>
        </div>
        <% if article.summary.present? %>
          <p class="mt-2 text-gray-700"><%= truncate(article.summary, length: 200) %></p>
        <% end %>
      </div>
    <% end %>
  </div>

  <div class="mt-6">
    <%= paginate @articles %>
  </div>
</div>