<h1 class="bg-gray-100 text-red-800 mx-auto px-2 py-1 text-4xl text-center">Admin Dashboard</h1>
<p class="text-center text-red-800 mb-4">You are in the Admin section. The links below are to various tables and tools for improving the mushroom identification process.</p>
<nav class="admin-dashboard-nav">
  <ul class="space-y-3 ml-6">
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <span>All code for this project is freely available at <%= link_to "https://github.com/mrdbidwill/mrdbid", "https://github.com/mrdbidwill/mrdbid", class: "text-blue-600 hover:text-blue-800 hover:underline font-medium", target: "_blank", rel: "noopener noreferrer" %></span>
    </li>

    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <span>Note: If you add data and there is not currently a data source form field, please include the source in the description or comments field.</span>
    </li>

    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <span>Not unique to admin. The "Export All to PDF" button will download all of a user's Mushroom with the characters and images entered. This feature is available to all on the "Mushroom" page. The goal is to offer a current record that is available offline where needed.</span>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <div>
        <strong>Download Database Backup Options:</strong>
        <div class="ml-4 mt-2 space-y-2">
          <!-- Option 1: Lookup Tables with MBList -->
          <div>
            <span id="db-export-link-1">
              <%= link_to "1. Lookup Tables (includes MBList)", admin_database_export_path(export_type: 'lookup_tables'),
                  data: {
                    turbo: false,
                    turbo_confirm: "⚠️ This file is approximately 400MB and may take 10-30 seconds to download. Continue?"
                  },
                  class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %>
            </span>
            <span id="db-export-mobile-warning-1" style="display: none;">
              <strong>1. Lookup Tables (Desktop Only)</strong>
            </span>
            <br>
            <small class="text-gray-600" style="font-size: 0.85em;">
              <span id="db-export-desktop-warning-1">
                Complete lookup/reference tables ready for data entry. Excludes all user input data.<br/>
                ⚠️ Large file (~400MB). Download may take 10-30 seconds.
              </span>
              <span id="db-export-mobile-msg-1" style="display: none; color: #d97706;">
                ⚠️ Not available on mobile devices. Please use a desktop computer.
              </span>
            </small>
          </div>

          <!-- Option 2: Lookup Tables without MBList -->
          <div>
            <span id="db-export-link-2">
              <%= link_to "2. Lookup Tables (excludes MBList)", admin_database_export_path(export_type: 'lookup_no_mblist'), data: { turbo: false }, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %>
            </span>
            <span id="db-export-mobile-warning-2" style="display: none;">
              <strong>2. Lookup Tables without MBList (Desktop Only)</strong>
            </span>
            <br>
            <small class="text-gray-600" style="font-size: 0.85em;">
              <span id="db-export-desktop-warning-2">
                All lookup/reference tables except the large MBList taxonomy table. Excludes all user input data.<br/>
                ⚠️ Smaller file (~20MB). Faster download.
              </span>
              <span id="db-export-mobile-msg-2" style="display: none; color: #d97706;">
                ⚠️ Not available on mobile devices. Please use a desktop computer.
              </span>
            </small>
          </div>

          <!-- Option 3: MBList Only -->
          <div>
            <span id="db-export-link-3">
              <%= link_to "3. MBList Database Only", admin_database_export_path(export_type: 'mblist_only'),
                  data: {
                    turbo: false,
                    turbo_confirm: "⚠️ This file is approximately 380MB and may take 10-30 seconds to download. Continue?"
                  },
                  class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %>
            </span>
            <span id="db-export-mobile-warning-3" style="display: none;">
              <strong>3. MBList Database Only (Desktop Only)</strong>
            </span>
            <br>
            <small class="text-gray-600" style="font-size: 0.85em;">
              <span id="db-export-desktop-warning-3">
                Only the MBList taxonomy reference table. Combine with Option 2 for complete lookup tables.<br/>
                ⚠️ Large file (~380MB). Download may take 10-30 seconds.
              </span>
              <span id="db-export-mobile-msg-3" style="display: none; color: #d97706;">
                ⚠️ Not available on mobile devices. Please use a desktop computer.
              </span>
            </small>
          </div>
        </div>
        <small class="text-gray-600 mt-2 block" style="font-size: 0.85em;">
          ℹ️ All options exclude user data and security tables. Use these to populate a fresh installation.
        </small>
        <script>
          function initializeDatabaseExports() {
            // Detect if user is on mobile device
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
              for (let i = 1; i <= 3; i++) {
                const linkElement = document.getElementById('db-export-link-' + i);
                const mobileWarning = document.getElementById('db-export-mobile-warning-' + i);
                const desktopWarning = document.getElementById('db-export-desktop-warning-' + i);
                const mobileMsg = document.getElementById('db-export-mobile-msg-' + i);

                if (linkElement) linkElement.style.display = 'none';
                if (mobileWarning) mobileWarning.style.display = 'inline';
                if (desktopWarning) desktopWarning.style.display = 'none';
                if (mobileMsg) mobileMsg.style.display = 'inline';
              }
            }

            // Add confirmation dialogs for large downloads
            const link1 = document.querySelector('#db-export-link-1 a');
            const link3 = document.querySelector('#db-export-link-3 a');

            if (link1) {
              link1.addEventListener('click', function(e) {
                e.preventDefault();
                if (confirm('⚠️ This file is approximately 400MB and may take 10-30 seconds to download. Continue?')) {
                  window.location.href = this.href;
                }
              });
            }

            if (link3) {
              link3.addEventListener('click', function(e) {
                e.preventDefault();
                if (confirm('⚠️ This file is approximately 380MB and may take 10-30 seconds to download. Continue?')) {
                  window.location.href = this.href;
                }
              });
            }
          }

          // Initialize on page load
          document.addEventListener('DOMContentLoaded', initializeDatabaseExports);

          // Re-initialize on Turbo navigation
          document.addEventListener('turbo:load', initializeDatabaseExports);
        </script>
      </div>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <span><%= link_to "Admin To Do List", admin_admin_todos_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %> Or just click on 'Admin To Do' buttons throughout site.</span>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <%= link_to "Articles", admin_articles_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <span><%= link_to "Colors", admin_colors_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %>  (Not editable here.)</span>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <%= link_to "Countries", admin_countries_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %>
    </li>
    <!-- <li><%# link_to "DNA Sequences", admin_dna_sequences_path %></li> -->
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <%= link_to "Fungus Types", admin_fungus_types_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %>
    </li>

    <li> Genus & Species are at the root of all mushroom identification. I am using the MBList database which is included in the database download above.</li>
    <!-- <li><%# link_to "Genus", admin_genera_path %></li>  -->
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <%= link_to "Groups", all_groups_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <%= link_to "Lens", admin_lenses_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <span><%= link_to "Lookup Items", admin_lookup_items_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %> There are a lot of these that make up the radio and drop-down list options for a character. These are part of the core goal to provide all the options for a character.</span>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <span><%= link_to "Observation Methods", admin_observation_methods_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %> With hundreds of characters with hundreds more lookup items, Observation Methods and Parts are used to organize them.</span>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <span>MBList (not able to modify here)</span>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <span><%= link_to "Mushroom Characters", admin_mr_characters_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %> These work in tandem with Lookup Items as part of the core goal to provide all the options for a character.</span>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <span><%= link_to "Parts", admin_parts_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %> Used to identify and organize characters.</span>
    </li>
    <!-- <li><%# link_to "Permissions", admin_permissions_path %></li>  -->
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <%= link_to "Plants", admin_plants_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %>
    </li>
    <!-- <li><%# link_to "Roles", admin_roles_path %></li>  -->
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <span><%= link_to "Source Data", admin_source_data_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %> I have made an effort to provide sources for important data. Not as simple as I originally thought, since <strong>my</strong> source for a particular piece of data may be different from <strong>your</strong> source of that same data. A work in progress, like others.</span>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <%= link_to "Source Data Types", admin_source_data_types_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <span><%= link_to "Storage Locations", admin_storage_locations_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %> This may be a "to do" list of herbariums?</span>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <%= link_to "States", admin_states_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %>
    </li>
    <li class="flex items-start">
      <span class="text-blue-600 mr-2 flex-shrink-0">▸</span>
      <%= link_to "Trees", admin_trees_path, class: "text-blue-600 hover:text-blue-800 hover:underline font-medium" %>
    </li>
    <!-- Add more as needed, or generate dynamically -->
  </ul>
</nav>

<!-- Optionally: Add summary stats, recent changes, versioning quick links, etc. -->