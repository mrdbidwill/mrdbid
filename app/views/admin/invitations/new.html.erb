<% content_for :title, "New Invitation" %>

<div class="mx-auto md:w-2/3 w-full">
  <% if notice.present? %>
    <p class="py-1 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <h1 class="font-bold text-2xl mb-6">Send Temporary Admin Invitation</h1>

  <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
    <p class="text-sm">
      <strong>How it works:</strong><br>
      1. Enter the expert's email address below<br>
      2. They'll receive a magic link via email<br>
      3. Clicking the link instantly logs them in with full admin access for 24 hours<br>
      4. After 24 hours, access automatically downgrades to read-only<br>
      5. They can email will@mrdbid.com to convert to permanent admin
    </p>
  </div>

  <%= form_with(model: @invitation_token, url: admin_invitations_path, class: "contents") do |form| %>
    <% if @invitation_token.errors.any? %>
      <div id="error_explanation" class="bg-red-50 text-red-500 px-3 py-2 font-medium rounded-lg mb-5">
        <h2><%= pluralize(@invitation_token.errors.count, "error") %> prohibited this invitation from being sent:</h2>
        <ul class="list-disc list-inside">
          <% @invitation_token.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="my-5">
      <%= form.label :email, class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.email_field :email,
          required: true,
          placeholder: "expert@example.com",
          class: "block shadow rounded-md border border-gray-400 outline-none px-3 py-2 w-full" %>
      <p class="mt-2 text-sm text-gray-500">
        Enter the email address of the expert you want to invite. They'll receive an invitation email with a magic link.
      </p>
    </div>

    <div class="flex gap-2">
      <%= form.submit "Send Invitation", class: "rounded-md px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-medium cursor-pointer" %>
      <%= link_to "Cancel", admin_invitations_path, class: "rounded-md px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium inline-block" %>
    </div>
  <% end %>
</div>
